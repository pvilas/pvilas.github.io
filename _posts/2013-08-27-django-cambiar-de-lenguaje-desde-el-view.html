---
layout: post
title: Django cambiar de lenguaje desde el view
date: '2013-08-27T13:33:00.001+02:00'
author: Pere Vilas
tags:
- django
modified_time: '2013-08-27T17:34:17.172+02:00'
blogger_id: tag:blogger.com,1999:blog-9191328551308072706.post-2244750586957662630
blogger_orig_url: http://www.pvilas.com/2013/08/django-cambiar-de-lenguaje-desde-el-view.html
---

Para cambiar el LANG en el servidor, asumiendo que tenemos <a href="https://docs.djangoproject.com/en/dev/topics/i18n/translation/" target="_blank">todo el sistema de traducción correctamente configurado</a>, llamamos via POST a la ficha setlang y le pasamos el campo language con la lengua seleccionada:<br /><br />En settings definimos los lenguajes con los que trabajamos:<br /><br /><pre class="brush:python;" title="Incluir en settings.py">LANGUAGES = (<br />&nbsp; &nbsp; ('es', ugettext(u'Español')),<br />&nbsp; &nbsp; ('de', ugettext(u'German')),<br />&nbsp; &nbsp; ('en', ugettext(u'English')),<br />);<br /></pre><br /><br />En urls, incluimos las url de i18n:<br /><br /><pre class="brush:python;" title="Incluir en urls.py">(r'^i18n/', include('django.conf.urls.i18n')),<br /></pre><br /><br />Y ya en el template podemos llamar a la ficha /i18n/setlang para setear el lenguaje:<br /><br /><pre class="brush:xml;" title="Código en el template">&lt;li class="gbt"&gt;<br />    &lt;form name="setLangSpanish" action="/i18n/setlang/" method="POST"&gt;{{ "{%" }} csrf_token %}<br />        &lt;input name="next" type="hidden" value="/" /&gt;<br />        &lt;input type="hidden" name="language" value="es" /&gt;<br />        &lt;a href="#" class="language_off" onclick="document.setLangSpanish.submit();return false;"&gt;<br />            &lt;span class="language_off sprachwahl"&gt;EspaÃ±ol&lt;/span&gt;&lt;/a&gt;<br />    &lt;/form&gt;<br />&lt;/li&gt;<br />&lt;li class="gbt"&gt;<br />    &lt;form name="setLangEnglish" action="/i18n/setlang/" method="POST"&gt;{{ "{%" }} csrf_token %}<br />        &lt;input name="next" type="hidden" value="/" /&gt;<br />        &lt;input type="hidden" name="language" value="en" /&gt;<br />        &lt;a href="#" class="language_off" onclick="document.setLangEnglish.submit();return false;"&gt;<br />            &lt;span class="language_off sprachwahl"&gt;English&lt;/span&gt;&lt;/a&gt;<br />    &lt;/form&gt;<br />&lt;/li&gt;<br />&lt;li class="gbt"&gt;<br />    &lt;form name="setLangDeusch" action="/i18n/setlang/" method="POST"&gt;{{ "{%" }} csrf_token %}<br />        &lt;input name="next" type="hidden" value="/" /&gt;<br />        &lt;input type="hidden" name="language" value="de" /&gt;<br />        &lt;a href="#" class="language_off" onclick="document.setLangDeusch.submit();return false;"&gt;<br />            &lt;span class="language_off sprachwahl"&gt;Deusch&lt;/span&gt;&lt;/a&gt;<br />    &lt;/form&gt;                <br />&lt;/li&gt;<br /><br /></pre><br />Fuente: oscarcp&nbsp;<a href="http://blog.oscarcp.com/?p=163">http://blog.oscarcp.com/?p=163</a>