---
layout: post
title: Ubuntu instalar cliente python Oracle
date: '2014-02-08T18:59:00.000+01:00'
author: Pere Vilas
tags:
- oracle
modified_time: '2014-04-07T14:50:58.245+02:00'
blogger_id: tag:blogger.com,1999:blog-9191328551308072706.post-5336721161115460981
blogger_orig_url: http://www.pvilas.com/2014/02/ubuntu-instalar-cliente-python-oracle.html
---

En Ubuntu12 LTS a mi me ha funcionado esto:<br /><span style="font-family: Times, Times New Roman, serif;"><br /></span><br /><ol style="border: 0px; line-height: 17.804800033569336px; list-style-image: initial; list-style-position: initial; margin: 0px 0px 1em 30px; padding: 0px; vertical-align: baseline;"><li style="border: 0px; margin: 0px; padding: 0px; vertical-align: baseline;"><div style="border: 0px; clear: both; margin-bottom: 1em; padding: 0px; vertical-align: baseline;"><code style="border: 0px; margin: 0px; padding: 1px 5px; vertical-align: baseline;"><span style="background-color: white; font-family: Times, Times New Roman, serif;"><code>apt-get install python-dev build-essential libaio1</code></span></code></div></li><li style="border: 0px; margin: 0px; padding: 0px; vertical-align: baseline;"><div style="border: 0px; clear: both; margin-bottom: 1em; padding: 0px; vertical-align: baseline;"><span style="background-color: white; font-family: Times, Times New Roman, serif;">Bajar&nbsp;<code>instantclient-basic-linux&nbsp;</code>&nbsp;e &nbsp;<code>instantclient-sdk-linux</code>&nbsp;de <a href="http://www.oracle.com/technetwork/database/features/instant-client/index-097480.html" target="_blank">Oracle</a>.</span></div></li><li style="border: 0px; margin: 0px; padding: 0px; vertical-align: baseline;"><div style="border: 0px; clear: both; margin-bottom: 1em; padding: 0px; vertical-align: baseline;"><span style="background-color: white; font-family: Times, Times New Roman, serif;">unzipear en, por ejemplo,&nbsp;&nbsp;<code>/opt/ora/</code></span></div></li><li style="border: 0px; margin: 0px; padding: 0px; vertical-align: baseline;"><div style="border: 0px; clear: both; margin-bottom: 1em; padding: 0px; vertical-align: baseline;"><span style="background-color: white; font-family: Times, Times New Roman, serif;">Modificar el path (cuidado con las versiones)</span></div><div style="border: 0px; clear: both; margin-bottom: 1em; padding: 0px; vertical-align: baseline;"><code style="border: 0px; margin: 0px; padding: 1px 5px; vertical-align: baseline;"><span style="background-color: white; font-family: Times, Times New Roman, serif;"><code>export ORACLE_HOME=/opt/ora/instantclient_11_2</code></span></code></div><div style="border: 0px; clear: both; margin-bottom: 1em; padding: 0px; vertical-align: baseline;"><code style="border: 0px; margin: 0px; padding: 1px 5px; vertical-align: baseline;"><span style="background-color: white; font-family: Times, Times New Roman, serif;"><code>export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$ORACLE_HOME</code></span></code></div></li><li style="border: 0px; margin: 0px; padding: 0px; vertical-align: baseline;"><div style="border: 0px; clear: both; margin-bottom: 1em; padding: 0px; vertical-align: baseline;"><span style="background-color: white; font-family: Times, Times New Roman, serif;">Crear link&nbsp;<code>cd $ORACLE_HOME &amp;&amp; ln -s libclntsh.so.11.1 libclntsh.so</code></span></div></li><li style="border: 0px; margin: 0px; padding: 0px; vertical-align: baseline;"><div style="border: 0px; clear: both; margin-bottom: 1em; padding: 0px; vertical-align: baseline;"><span style="background-color: white; font-family: Times, Times New Roman, serif;">Hacer <code>visudo</code> &nbsp;y añadir la línea&nbsp;<code>Defaults env_keep += "ORACLE_HOME"</code></span></div></li><li style="border: 0px; margin: 0px; padding: 0px; vertical-align: baseline;"><div style="border: 0px; clear: both; margin-bottom: 1em; padding: 0px; vertical-align: baseline;"><span style="background-color: white; font-family: Times, Times New Roman, serif;"><code>pip install cx_oracle</code></span></div></li><li style="border: 0px; margin: 0px; padding: 0px; vertical-align: baseline;"><span style="font-family: Times, Times New Roman, serif;"><span style="background-color: white;">Provamos con import cx_Oracle</span></span></li><li style="border: 0px; margin: 0px; padding: 0px; vertical-align: baseline;"><span style="background-color: white;"><span style="font-family: Times, Times New Roman, serif;">Si queremos usar las librerías desde cualquier usuario, editamos </span><span style="font-family: Courier New, Courier, monospace;">/etc/environment</span><span style="font-family: Times, Times New Roman, serif;"> y añadimos el punto 4 (sin el export) con el path entre comillas.</span></span></li></ol><span style="font-family: Courier New, Courier, monospace;"><br /></span><span style="font-family: Times, Times New Roman, serif;">En caso de tener el servidor Oracle en la misma máquina que el servidor Apache, entonces hay que añadir las lineas</span><br /><span style="font-family: Times, Times New Roman, serif;"><br /></span><span style="font-family: Times, Times New Roman, serif;"><code>export ORACLE_HOME=/opt/ora/instantclient_11_2</code></span><br /><span style="font-family: Times, Times New Roman, serif;"><code>export LD_LIBRARY_PATH=</code></span><span style="font-family: Times, 'Times New Roman', serif;">/opt/ora/instantclient_11_2</span><br /><span style="font-family: Times, Times New Roman, serif;"><br /></span><span style="font-family: Times, Times New Roman, serif;">en <code>/etc/apache3/envvars</code> y&nbsp;</span><span style="font-family: Times, 'Times New Roman', serif;">&nbsp;reiniciar apache.</span><br /><span style="font-family: Times, Times New Roman, serif;"><br /></span><span style="font-family: Times, Times New Roman, serif;">La razón es que, al menos en mi caso, no podemos usar las librerias del servidor como cliente ya que cx_Oracle nos da el error InterfaceError: Unable to acquire Oracle environment hanle</span><br /><br /><span style="font-family: Courier New, Courier, monospace;"><br /></span>Fuentes:<br /><a href="http://stackoverflow.com/questions/4307479/install-cx-oracle-for-python">http://stackoverflow.com/questions/4307479/install-cx-oracle-for-python</a><br /><br />