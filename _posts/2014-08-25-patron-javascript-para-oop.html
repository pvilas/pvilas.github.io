---
layout: post
title: Patrón javascript para OOP
date: '2014-08-25T02:00:00.007+02:00'
author: Pere Vilas
tags:
- javascript
modified_time: '2014-08-29T13:49:14.674+02:00'
blogger_id: tag:blogger.com,1999:blog-9191328551308072706.post-8689637065212749024
blogger_orig_url: http://www.pvilas.com/2014/08/patron-javascript-para-oop.html
---

<p>Se refiere a usar un estilo de programación orientada a objetos en javascript. </p> <p>Las funciones anónimas crean una closure dentro de ellas permitiendo que todo el scope quede oculto al exterior y accesible al interior y con ello ya tendríamos solucionado el acceso <strong>“private”</strong>.</p> <p>Pero ¿Cuál sería el mejor método para hacer hacer el acceso explícitamente público ?. Pues usando el siguiente patrón llamado <a href="http://yuiblog.com/blog/2007/06/12/module-pattern/">Yahoo Module Pattern</a> que básicamente pone dentro del return todo lo que queramos hacer <strong>“public”</strong>.</p> <p>Tomando el <a href="http://robertnyman.com/2008/10/09/explaining-javascript-scope-and-closures/">ejemplo</a> de Robert Nyman,</p>   <pre class="prettyprint"><code class=" hljs javascript"><span class="hljs-keyword">var</span> person = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span><br /><br />    <span class="hljs-comment">// Acceso Privado</span><br />    <span class="hljs-keyword">var</span> name = <span class="hljs-string">"Robert"</span>;<br /><br />    <span class="hljs-comment">// Acceso Público</span><br />    <span class="hljs-keyword">return</span> {<br />        getName : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span><br />            <span class="hljs-keyword">return</span> name;<br />        },<br />        setName : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(newName)</span> {</span><br />            name = newName;<br />        }<br />    };<br />}(); <span class="hljs-comment">// esta sintáxis hace que la función se autoejecute</span><br /><br />alert(person.name); <span class="hljs-comment">// Undefined</span><br />alert(person.getName()); <span class="hljs-comment">// "Robert"</span><br />person.setName(<span class="hljs-string">"Robert Nyman"</span>);<br />alert(person.getName()); <span class="hljs-comment">// "Robert Nyman"</span></code></pre> <p>Observamos cómo hacemos <em>name</em> privada y las funciones de <em>getter</em> y <em>setter</em> públicas.</p> <p>Si no necesitamos que la función se autoejecute (como es habitual en <strong><a href="http://nodejs.org">Node</a></strong>), podemos usar una sintaxis alternativa (pero no tengo claro que equivalente) y que personalmente prefiero a la anterior; Se trata de usar <strong>this</strong> para referenciar los objetos que queramos hacer públicos.</p>   <pre class="prettyprint"><code class=" hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Prova</span><span class="hljs-params">()</span> {</span><br />    <span class="hljs-comment">// parte privada</span><br />       <span class="hljs-keyword">var</span> nombre=<span class="hljs-string">"pere"</span>;<br /><br />       <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mayus</span><span class="hljs-params">(algo)</span> {</span><br />               <span class="hljs-keyword">return</span> algo.toUpperCase();<br />       }<br /><br />    <span class="hljs-comment">// parte pública</span><br />       <span class="hljs-keyword">this</span>.getName=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span><br />               <span class="hljs-comment">// accedemos a la funcion </span><br />               <span class="hljs-comment">// "privada" dentro</span><br />               <span class="hljs-comment">// del closure</span><br />               <span class="hljs-keyword">return</span> mayus(nombre);<br />       }<br /><br />       <span class="hljs-keyword">this</span>.setName=<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(newName)</span> {</span><br />               nombre=newName;<br />       }<br />} <span class="hljs-comment">// creamos el objeto con new</span><br /><br /><span class="hljs-keyword">var</span> p=<span class="hljs-keyword">new</span> Prova();<br />console.log(p.nombre); <span class="hljs-comment">// undefined</span><br />console.log(p.mayus(<span class="hljs-string">"Pere Vilas"</span>)); <span class="hljs-comment">// Error: has no method</span><br />console.log(p.getName()); <span class="hljs-comment">// devuelve PERE</span></code></pre>